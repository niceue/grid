<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="grid.js"></script>
<link rel="stylesheet" href="grid.css" />
<style type="text/css">
html {}
html,body {margin:0;padding:0;overflow:auto}
body {background:#f4f4f4;font:12px/1.5 arial,simsun;}
form {margin:0 0 10px 0;}
.wrap { }
.inner {padding:10px}
#a,#b,#c {color:#f00}
</style>
</head>
<body>
<div class="wrap">
<div class="inner">
	<form name="form1">
		<input name="testText" value="">
		<input type="hidden" name="testHidden" value="1">
		<input type="checkbox" name="testCheck" value="1">
		<input type="checkbox" name="testCheck" value="2">
		<input type="checkbox" name="testCheck" value="3">
		<input type="checkbox" name="testCheck" value="4">
		<input type="submit"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		数据量：<select id="dataRows">
		<option value="0"> 0 </option>
		<option value="1"> 1 </option>
		<option value="2"> 2 </option>
	<option value="5"> 5 </option>
	<option value="10" selected> 10 </option>
	<option value="20"> 20 </option>
	<option value="30"> 30 </option>
	<option value="50"> 50 </option>
	<option value="100"> 100 </option>
	<option value="500"> 500 </option>
</select> 条数据，
<!--渲染时间：<span id="a"></span>&nbsp;&nbsp;-->
<input type="button" value="测试渲染" onclick="renderData()">
	</form>
	<input type="button" value="取得选中项" onclick="console.log( $.grid('#data_grid').get() )">
	<div id="data_grid"></div>
</div>
</div>
<script type="text/javascript">
//console.log($('#data_grid').offset())
//var time1 = document.getElementById('a');

/*$('#data_grid').on('complete.grid', function(e, a, b){
	time1.innerHTML = b - a + 'ms';
});*/

function getData(){
	var rows = [], len = document.getElementById('dataRows').value;
	for (var i=0; i <len; i++) {
		var obj = {
			'username': 'jony',
			'name': '张进',
			'mobile': '18688723132',
			'email': 'zj86@foxmail.com',
			'money': '10000.0000',
			'balance': '6660.0043',
			'status': '1',
			'mark': ''
		};
		obj.id = i + 1;
		rows.push(obj);
	}
	return {recordCount:len, rows:rows};
}

var columns = [
		{field:'id', title:'ID', width:80},
		{field:'username', title:'用户名', width:80},
		{title:'个人信息', columns: [
			{title:'联系方式', columns: [
				{field:'name', title:'姓名', width:80, targetCol:'6'},
				{field:'mobile', title:'手机号', width:60},
				{field:'email', title:'邮箱', width:60}
			]}
		]},
		{title:'账户', columns: [
			{field:'money', title:'预存款', width:120, align:'right', summary:'sum,avg'},
			{field:'balance', title:'余额', width:120, align:'right', summary:'sum,avg'}
		]},
		{field:'status', title:'状态', width:120},
		{field:'mark', title:'备注', width:150},
		{field:'options', title:'操作', sortable:false}
	];
function renderData(){
	$('#data_grid').grid({
		data: getData(),
		form: 'form1',
		//bindForm: false,
		columns: columns
	});
}
$.grid({
	
	data: getData(),
	//height: 300,
	params: {sb: '123'},
	selectable: true,
	sortable: true,
	checkbox: true,
	//heightFix: 10,
	showRowIndex: true,
	
	columns: [
		{field:'id', title:'ID', width:80, sortable:true},
		{field:'username', title:'用户名', width:80, sortable:true},
		{field:'name', title:'姓名', width:80, targetCol:'5,6'},
		{field:'mobile', title:'手机号', width:120, sortable:true},
		{field:'email', title:'邮箱', width:120},
		{field:'money', title:'预存款', width:120, align:'right'},
		{field:'balance', title:'余额', width:120, align:'right'},
		{field:'status', title:'状态', width:120},
		{field:'mark', title:'备注', width:150},
		{field:'options', title:'操作'}
	],
	onRender: {
		status: function(row, value){
			return (value == 1) ? '<em class="ok">启用</em>' : '<em class="no">停用</em>';
		},
		options: function(row){
			return '<a href="#" fn="edit">修改</a>';
		}
	},
	summary: {
		avg: [0,5,6],
		sum: [0,5,6]
	},
	edit: function(e, row){
		alert('edit'); 
	}
 });

</script>

</body>
</html>